# MCP 버전 관리 (Versioning)

## 개요

Model Context Protocol은 `YYYY-MM-DD` 형식의 문자열 기반 버전 식별자를 사용합니다. 이는 하위 호환성이 없는 변경사항이 마지막으로 이루어진 날짜를 나타냅니다.

> **중요 원칙**: 변경사항이 하위 호환성을 유지하는 한, 프로토콜이 업데이트되어도 프로토콜 버전은 증가하지 않습니다. 이를 통해 상호 운용성을 유지하면서 점진적인 개선이 가능합니다.

---

## 버전 유형 (Revisions)

MCP 버전은 다음과 같이 표시될 수 있습니다:

### 1. Draft (초안)

- **상태**: 진행 중인 사양
- **사용**: 아직 사용할 준비가 되지 않음
- **목적**: 개발 및 검토 단계

### 2. Current (현재)

- **상태**: 현재 프로토콜 버전
- **사용**: 사용 가능하며 준비 완료
- **특징**: 하위 호환 변경사항을 계속 받을 수 있음

### 3. Final (최종)

- **상태**: 과거의 완료된 사양
- **사용**: 더 이상 변경되지 않음
- **목적**: 레거시 지원 및 참조

---

## 현재 버전

**현재 프로토콜 버전**: [**2025-11-25**](https://claude.ai/specification/2025-11-25)

이 버전은 프로덕션 환경에서 사용할 준비가 되어 있으며, 하위 호환성을 유지하는 추가 개선사항을 받을 수 있습니다.

---

## 버전 협상 (Negotiation)

### 협상 시기

버전 협상은 [초기화(initialization)](https://claude.ai/specification/latest/basic/lifecycle#initialization) 중에 발생합니다.

### 협상 규칙

클라이언트와 서버의 버전 지원:

- **동시 다중 버전 지원 가능 (MAY)**
    - 클라이언트와 서버는 여러 프로토콜 버전을 동시에 지원할 수 있음
- **단일 버전 합의 필수 (MUST)**
    - 세션에 사용할 단일 버전에 반드시 합의해야 함

### 오류 처리

프로토콜은 버전 협상 실패 시 적절한 오류 처리를 제공합니다:

- 클라이언트가 서버와 호환되는 버전을 찾을 수 없을 때
- 연결을 우아하게 종료할 수 있도록 허용
- 명확한 오류 메시지 제공

---

## 버전 관리 철학

### 하위 호환성 우선

MCP의 버전 관리 전략은 안정성과 혁신 사이의 균형을 유지합니다:

**장점:**

1. **안정성**: 기존 구현이 계속 작동
2. **점진적 개선**: 하위 호환성을 유지하면서 새 기능 추가 가능
3. **상호 운용성**: 다양한 클라이언트와 서버 버전 간 통신 가능

**변경 시기:**

- 하위 호환성이 없는 변경사항이 필요할 때만 버전 번호 업데이트
- 날짜 기반 식별자로 변경 시점 명확히 추적

### 다중 버전 지원

클라이언트와 서버가 여러 버전을 지원할 수 있는 능력:

- **유연성**: 다양한 환경에서 작동
- **전환 용이성**: 새 버전으로의 점진적 마이그레이션
- **호환성**: 구 버전과 신 버전 클라이언트/서버 간 통신 가능

---

## 실전 가이드

### 클라이언트 구현

```json
// 초기화 요청에서 지원하는 버전 명시
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "initialize",
  "params": {
    "protocolVersion": "2025-11-25",
    "capabilities": { ... },
    "clientInfo": { ... }
  }
}
```

### 서버 구현

```json
// 초기화 응답에서 사용할 버전 확인
{
  "jsonrpc": "2.0",
  "id": 1,
  "result": {
    "protocolVersion": "2025-11-25",
    "capabilities": { ... },
    "serverInfo": { ... }
  }
}
```

### 버전 불일치 처리

```json
// 호환되지 않는 버전일 때 오류 반환
{
  "jsonrpc": "2.0",
  "id": 1,
  "error": {
    "code": -32602,
    "message": "Unsupported protocol version"
  }
}
```

---

## 모범 사례

### 서버 개발자를 위한 권장사항

1. **다중 버전 지원 고려**
    
    - 가능한 경우 여러 프로토콜 버전 지원
    - 더 넓은 클라이언트 호환성 확보
2. **명확한 버전 문서화**
    
    - 지원하는 버전 명시
    - 각 버전의 기능 차이 설명
3. **우아한 저하**
    
    - 지원되지 않는 버전에 대해 명확한 오류 메시지 제공
    - 가능한 경우 대체 버전 제안

### 클라이언트 개발자를 위한 권장사항

1. **버전 협상 구현**
    
    - 초기화 시 버전 협상 로직 구현
    - 여러 버전에 대한 폴백 메커니즘 고려
2. **버전별 기능 처리**
    
    - 서버가 지원하는 버전에 따라 기능 조정
    - 버전별 capability 확인
3. **사용자 친화적 오류**
    
    - 버전 불일치 시 사용자에게 이해하기 쉬운 메시지 제공
    - 업데이트 또는 호환 서버 찾기 안내

---

## 버전 기록

|버전|상태|설명|
|---|---|---|
|2025-11-25|Current|현재 프로토콜 버전|
|이전 버전들|Final|과거 완료된 사양|

> **참고**: 최신 사양은 항상 [공식 문서](https://modelcontextprotocol.io/specification/2025-11-25)를 참조하세요.

---

## 요약

MCP의 버전 관리 시스템은:

- **날짜 기반 버전 식별자** (`YYYY-MM-DD`) 사용
- **하위 호환성 우선** 원칙
- **유연한 협상 메커니즘**을 통한 클라이언트-서버 호환성 보장
- **Draft, Current, Final** 세 가지 버전 상태 구분

이를 통해 안정성과 혁신 사이의 균형을 유지하며, 생태계의 점진적 발전을 지원합니다.

---

## 추가 리소스

- **최신 사양**: [Specification 2025-11-25](https://claude.ai/specification/2025-11-25)
- **초기화 프로세스**: [Lifecycle - Initialization](https://claude.ai/specification/latest/basic/lifecycle#initialization)
- **아키텍처**: [Architecture Overview](https://claude.ai/docs/learn/architecture)
- **GitHub**: https://github.com/modelcontextprotocol

---

_이 문서는 Model Context Protocol 공식 문서에서 가져온 내용입니다._